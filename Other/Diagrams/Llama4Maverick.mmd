flowchart TD
    A[Initialize VideoProcessor] --> B[Load OpenRouter API Key]
    B --> C[Setup Rate Limiter & Metrics]
    C --> D[Process Video]
    
    subgraph Process
    D --> E[Sample Frames]
    E --> F[Identify Distinct Frames]
    F --> G[OCR with LLaMA 4 Maverick]
    G --> H[Retry Failed OCR Frames]
    H --> I[Extract Names]
    I --> J[Generate Summary]
    end
    
    J --> K[Save Results]
    K --> L[Display Statistics]

    subgraph "Rate Limiting"
    RL1[Wait If Needed] --> RL2[Record Request]
    RL2 --> RL3{API Success?}
    RL3 -- Yes --> RL4[Record Success]
    RL3 -- No --> RL5[Record Rate Limited]
    RL5 --> RL6[Adaptive Backoff]
    RL4 --> RL7[Gradually Increase RPM]
    end